# defines all the network related options.
network:
  # bindIP is ip where server working on.
  bindIP:
  # httpPort is port where server listen to http port.
  port: 80
  # defines tls related options.
  tls:
    # server should be accessed without verifying the TLS certificate.
    insecureSkipVerify:
    # server requires TLS client certificate authentication.
    certFile:
    # server requires TLS client certificate authentication.
    keyFile:
    # trusted root certificates for server.
    caFile:
    # the password to decrypt the certificate.
    password:

# defines service discovery related settings.
service:
  # defines etcd related settings
  etcd:
    # endpoints is a list of URLs.
    endpoints:
      - 127.0.0.1:2379
    # dialTimeoutMS is the timeout milliseconds for failing to establish a connection.
    dialTimeoutMS:
    # username is a user's name for authentication.
    username:
    # password is a password for authentication.
    password:
    # defines tls related options.
    tls:
      # server should be accessed without verifying the TLS certificate.
      insecureSkipVerify:
      # server requires TLS client certificate authentication.
      certFile:
      # server requires TLS client certificate authentication.
      keyFile:
      # trusted root certificates for server.
      caFile:
      # the password to decrypt the certificate.
      password:

# defines database related settings.
database:
  # defines resource database related settings.
  resource:
    # is a seed list of host:port addresses of database nodes.
    endpoints:
      - 127.0.0.1:3306
    database: ***
    user: ***
    password: ***
    # DialTimeoutSec is timeout in seconds to wait for a response from the db server
    # all the timeout default value reference:
    # https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html.
    dialTimeoutSec:
    readTimeoutSec:
    writeTimeoutSec:
    maxIdleTimeoutMin:
    maxOpenConn:
    maxIdleConn:
    # defines tls related options.
    tls:
      # server should be accessed without verifying the TLS certificate.
      insecureSkipVerify:
      # server requires TLS client certificate authentication.
      certFile:
      # server requires TLS client certificate authentication.
      keyFile:
      # trusted root certificates for server.
      caFile:
      # the password to decrypt the certificate.
      password:
  # maxSlowLogLatencyMS defines the max tolerance in millisecond to execute
  # the database command, if the cost time of execute have >= the maxSlowLogLatencyMS
  # then this request will be logged.
  maxSlowLogLatencyMS: 200
  # limiter limit the incoming request frequency to database for each sharding, and
  # each sharding have the independent request limitation.
  limiter:
    qps: 500
    burst: 500

# defines log's related configuration
log:
  # log storage directory.
  logDir: ./log
  # per file max size, uint: MB.
  maxPerFileSizeMB: 1024
  # per line max size, uint: KB.
  maxPerLineSizeKB: 2
  # log file max storage number.
  maxFileNum: 5
  # whether the restart service log is appended to the latest log file, or whether a new log file is created.
  logAppend: false
  # log the log to std err only, it can not be used with AlsoToStdErr at the same time.
  toStdErr: false
  # log the log to file and also to std err. it can not be used with ToStdErr at the same time.
  alsoToStdErr: false
  # log level.
  verbosity: 0

# defines esb related settings.
esb:
  # endpoints is a seed list of host:port addresses of esb nodes.
  endpoints:
    - http://paas.bk.com/
  # appCode is the BlueKing app code of hcm to request esb.
  appCode: hcm
  # appSecret is the BlueKing app secret of hcm to request esb.
  appSecret: hcm
  # user is the BlueKing user of hcm to request esb.
  user: admin
  # defines tls related options.
  tls:
    # server should be accessed without verifying the TLS certificate.
    insecureSkipVerify:
    # server requires TLS client certificate authentication.
    certFile:
    # server requires TLS client certificate authentication.
    keyFile:
    # trusted root certificates for server.
    caFile:
    # the password to decrypt the certificate.
    password:

useMongo: true

mongodb:
  host: 127.0.0.1:27017
  port: 27017
  usr: hcm
  pwd: hcm
  database: cr
  maxOpenConns: 300
  maxIdleConns: 100
  mechanism: SCRAM-SHA-1
  rsName: rs0
  socketTimeoutSeconds: 10

watch:
  host: 127.0.0.1:27017
  port: 27017
  usr: hcm
  pwd: hcm
  database: cr
  maxOpenConns: 100
  maxIdleConns: 50
  mechanism: SCRAM-SHA-1
  rsName: rs0
  socketTimeoutSeconds: 10

redis:
  host: 127.0.0.1:6379
  pwd: test
  sentinelPwd:
  database: "0"
  maxOpenConns: 3000
  maxIdleConns: 100
  masterName:

cvm:
  old_host: http://127.0.0.1
  host: http://127.0.0.1
  launch_password: test

tjj:
  host: http://127.0.0.1
  secret_id: test
  secret_key: test
  operator: admin

xship:
  host: http://127.0.0.1
  client_id: test
  secret_key: test

tencentcloud:
  endpoints:
    cvm: http://127.0.0.1
    vpc: http://127.0.0.1
    clb: http://127.0.0.1
  credential:
    id: test
    key: test

erp:
  host: http://127.0.0.1

tmp:
  host: http://127.0.0.1

xray:
  host: http://127.0.0.1
  client_id: test
  secret_key: test

tcaplus:
  host: http://127.0.0.1

tgw:
  host: http://127.0.0.1

l5:
  host: http://127.0.0.1

iam:
  host: http://127.0.0.1
  app_code: test
  app_secret: test
  operator: admin

safety:
  host: http://127.0.0.1

sops:
  host: https://127.0.0.1
  app_code: test
  app_secret: test
  operator: admin
  devnet_download_ip: 127.0.0.1

dvm:
  host: http://127.0.0.1
  secret_id: test
  secret_key: test
  operator: admin

# defines cmsi related settings.
cmsi:
  cc:
    - manager1@example.com
    - manager2@example.com
  sender: hcm@example.com
  # endpoints is a seed list of host:port addresses of finops api gateway nodes.
  endpoints:
    - http://demo.com
  # appCode is the BlueKing app code of hcm to request finops api gateway.
  appCode: bk-hcm
  # appSecret is the BlueKing app secret of hcm to request finops api gateway.
  appSecret: xxxxxxxxx
  # user is the BlueKing user of hcm to request finops api gateway.
  user: bk-hcm
  # bkTicket is the BlueKing access ticket of hcm to request finops api gateway.
  bkTicket:
  # bkToken is the BlueKing access token of hcm to request finops api gateway.
  bkToken: xxxxxxxxx
  # defines tls related options.
  tls:
    # server should be accessed without verifying the TLS certificate.
    insecureSkipVerify:
    # server requires TLS client certificate authentication.
    certFile:
    # server requires TLS client certificate authentication.
    keyFile:
    # trusted root certificates for server.
    caFile:
    # the password to decrypt the certificate.
    password:

# defines itsm related settings.
itsm:
  # endpoints is a seed list of host:port addresses of itsm api gateway nodes.
  endpoints:
    - http://127.0.0.1
  # appCode is the BlueKing app code of hcm to request itsm api gateway.
  appCode: test
  # appSecret is the BlueKing app secret of hcm to request itsm api gateway.
  appSecret: test
  # user is the BlueKing user of hcm to request itsm api gateway.
  user: admin
  # bkTicket is the BlueKing access ticket of hcm to request itsm api gateway.
  bkTicket:
  # bkToken is the BlueKing access token of hcm to request itsm api gateway.
  bkToken:
  # serviceID is the service id of hcm to request itsm api gateway.
  serviceID: 100
  # applyLinkFormat is the format of the apply link.
  applyLinkFormat: http://www.test.com/#/service/apply/records/%d
  # defines tls related options.
  tls:
    # server should be accessed without verifying the TLS certificate.
    insecureSkipVerify:
    # server requires TLS client certificate authentication.
    certFile:
    # server requires TLS client certificate authentication.
    keyFile:
    # trusted root certificates for server.
    caFile:
    # the password to decrypt the certificate.
    password:

# defines itsm flows which can be cancelled related configuration
cancelItsmFlows:
  # itsm service name
  - serviceName: "资源申领流程"
    # itsm state nodes
    stateNodes:
      - nodeName: "leader审批"
      - nodeName: "管理员审批"

# defines itsm flows related configuration
itsmFlows:
  # itsm service name
  - serviceName:
    # itsm service id
    serviceID:
    # itsm state nodes
    stateNodes:
      - id:
        nodeName:
        approver:
        approvalKey:
        remarkKey:
    # itsm service redirect url
    redirectUrlTemplate: https://bkhcm-example.com/xxx/detail?id=%d

bkchat:
  host: http://bkchat.ied.com:8000
  notify_format: |
    『HCM』资源申请【单据完成通知】

     标题：资源申请单据完成[order_id:%d]
     资源申请单号：%d
     提单人：%s
     业务：%s
     需求类型：%s
     创建时间：%s
     备注：%s
     资源申请单链接：http://scrtest.ied.com/#/cr/service/apply/records/%d

resourceDissolve:
  originDate: "20241219"
  # 需要从裁撤系统同步对应项目名称的主机
  projectNames:
    - "2025机房裁撤（国内）"
    - "2025机房裁撤（海外）"
  # 裁撤列表展示需要排除对应项目名称的主机
  listExcludedProjectNames:
    - "2025机房裁撤（海外）"
  syncDissolveHost: true

elasticsearch:
  url: 127.0.0.1:9200
  user: hcm
  password: hcm
  # defines tls related options.
  tls:
    # server should be accessed without verifying the TLS certificate.
    insecureSkipVerify:
    # server requires TLS client certificate authentication.
    certFile:
    # server requires TLS client certificate authentication.
    keyFile:
    # trusted root certificates for server.
    caFile:
    # the password to decrypt the certificate.
    password:

blacklist:

ngate:
  host: https://127.0.0.1
  app_code: test
  app_secret: test

# 开启recover服务，恢复服务重启前处于执行中的订单，使其继续流转
recover:
  # 开启申请单据恢复服务
  enableApplyRecover: false
  # 开启回收单据恢复服务
  enableRecycleRecover: false
  # 开启cvm生产恢复服务
  enableCvmProdRecover: false

rollingServer:
  syncBill: true
  returnNotification:
    enable: false
    # 可用于开发调试，是否通知业务
    sendToBusiness: false
    # 通知时是否附带给该用户
    defaultReceivers:

caiche:
  host: http://127.0.0.1
  app_key: test
  app_secret: test

resPlan:
  reportPenaltyRatio: false
  expireNotification:
    enable: false
    sendToBusiness: false
    defaultReceiver: ""

# 开启自研云资源同步服务,单位:分钟
resourceSync:
  syncVpc: 30
  syncSubnet: 30
  syncCapacity: 360
  syncLeftIP: 360

# defines bkdbm related settings.
bkdbm:
  # endpoints is a seed list of host:port addresses of bkdbm api gateway nodes.
  endpoints:
    - http://127.0.0.1
  # appCode is the BlueKing app code of hcm to request bkdbm api gateway.
  appCode: test
  # appSecret is the BlueKing app secret of hcm to request bkdbm api gateway.
  appSecret: test
  # user is the BlueKing user of hcm to request bkdbm api gateway.
  user: admin
  # bkTicket is the BlueKing access ticket of hcm to request bkdbm api gateway.
  bkTicket:
  # bkToken is the BlueKing access token of hcm to request bkdbm api gateway.
  bkToken:
  # defines tls related options.
  tls:
    # server should be accessed without verifying the TLS certificate.
    insecureSkipVerify:
    # server requires TLS client certificate authentication.
    certFile:
    # server requires TLS client certificate authentication.
    keyFile:
    # trusted root certificates for server.
    caFile:
    # the password to decrypt the certificate.
    password:

stuckCheck:
  recycle:
    enable: true
    interval: 24h
    startUpDelay: 2m
    # 关注 [now-maxTime,now-minTime] 的单据
    minTime: 24h
    maxTime: 336h
